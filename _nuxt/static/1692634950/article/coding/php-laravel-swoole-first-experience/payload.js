__NUXT_JSONP__("/article/coding/php-laravel-swoole-first-experience", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E){return {data:[{page:{slug:"php-laravel-swoole-first-experience",description:"繼上次的 PHP Laravel + RoadRunner 初體驗初次玩了 RoadRunner 的架設之後，今天就來體驗一下",category:"coding",title:"PHP Laravel + Swoole 初體驗",createdAt:x,updatedAt:x,toc:[{id:n,depth:h,text:n},{id:o,depth:h,text:o},{id:p,depth:h,text:p},{id:q,depth:h,text:q},{id:r,depth:h,text:r}],body:{type:"root",children:[{type:b,tag:e,props:{},children:[{type:a,value:"繼上次的 "},{type:b,tag:f,props:{href:"https:\u002F\u002Fwangchristine.github.io\u002Farticle\u002Fcoding\u002Fphp-laravel-roadrunner-first-experience",rel:[y,z,A],target:B},children:[{type:a,value:"PHP Laravel + RoadRunner 初體驗"}]},{type:a,value:" 初次玩了 RoadRunner 的架設之後，今天就來體驗一下號稱高性能、加快速度的 Swoole 吧!"}]},{type:a,value:c},{type:b,tag:i,props:{id:n},children:[{type:b,tag:f,props:{href:"#%E7%92%B0%E5%A2%83",ariaHidden:j,tabIndex:k},children:[{type:b,tag:g,props:{className:[l,m]},children:[]}]},{type:a,value:n}]},{type:a,value:c},{type:b,tag:"ol",props:{},children:[{type:a,value:c},{type:b,tag:s,props:{},children:[{type:a,value:"Docker: 主要使用 Swoole 官方提供的 image，PHP 擴充記得安裝 "},{type:b,tag:d,props:{},children:[{type:a,value:"sockets"}]},{type:a,value:"，其他像是 PHP 的 image 版本和相關執行指令看個人專案去安裝。\n"},{type:b,tag:t,props:{className:[u]},children:[{type:b,tag:v,props:{className:[w,"language-dockerfile"]},children:[{type:b,tag:d,props:{},children:[{type:b,tag:g,props:{className:[C,"instruction"]},children:[{type:b,tag:g,props:{className:[C,"keyword"]},children:[{type:a,value:"FROM"}]},{type:a,value:" phpswoole\u002Fswoole:php8.0-alpine"}]},{type:a,value:c}]}]}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:s,props:{},children:[{type:a,value:"Laravel\n"},{type:b,tag:"ul",props:{},children:[{type:a,value:c},{type:b,tag:s,props:{},children:[{type:a,value:"Composer 裝這個: "},{type:b,tag:d,props:{},children:[{type:a,value:"swooletw\u002Flaravel-swoole"}]}]},{type:a,value:c},{type:b,tag:s,props:{},children:[{type:a,value:"產生套件設定檔("},{type:b,tag:d,props:{},children:[{type:a,value:D}]},{type:a,value:" and "},{type:b,tag:d,props:{},children:[{type:a,value:"swoole_websocket.php"}]},{type:a,value:"):"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:t,props:{className:[u]},children:[{type:b,tag:v,props:{className:[w,E]},children:[{type:b,tag:d,props:{},children:[{type:a,value:"php artisan vendor:publish --tag=laravel-swoole\n"}]}]}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:i,props:{id:o},children:[{type:b,tag:f,props:{href:"#%E8%A8%AD%E5%AE%9A",ariaHidden:j,tabIndex:k},children:[{type:b,tag:g,props:{className:[l,m]},children:[]}]},{type:a,value:o}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"這次我們主要先玩 "},{type:b,tag:d,props:{},children:[{type:a,value:D}]},{type:a,value:" 設定檔，可以看到這設定檔滿滿的註解，很貼心的跟我們說每一行主要的用途，想了解細部的解釋可以看"},{type:b,tag:f,props:{href:"https:\u002F\u002Fgithub.com\u002Fswooletw\u002Flaravel-swoole\u002Fwiki\u002F5.-Configuration",rel:[y,z,A],target:B},children:[{type:a,value:"官方文件"}]},{type:a,value:"。"}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"基本上到這邊就設定完畢了，但因為我要測試所以在 "},{type:b,tag:d,props:{},children:[{type:a,value:".env"}]},{type:a,value:" 做覆蓋設定:"}]},{type:a,value:c},{type:b,tag:t,props:{className:[u]},children:[{type:b,tag:v,props:{className:[w,E]},children:[{type:b,tag:d,props:{},children:[{type:a,value:"SWOOLE_HTTP_HOST=0.0.0.0\nSWOOLE_HTTP_REACTOR_NUM=1\nSWOOLE_HTTP_WORKER_NUM=1\nSWOOLE_HOT_RELOAD_ENABLE=true\nSWOOLE_OB_OUTPUT=false\n"}]}]}]},{type:a,value:c},{type:b,tag:i,props:{id:p},children:[{type:b,tag:f,props:{href:"#%E5%9F%B7%E8%A1%8C",ariaHidden:j,tabIndex:k},children:[{type:b,tag:g,props:{className:[l,m]},children:[]}]},{type:a,value:p}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"執行 "},{type:b,tag:d,props:{},children:[{type:a,value:"php artisan swoole:http start"}]},{type:a,value:" 就可以啟動專案囉！"}]},{type:a,value:c},{type:b,tag:i,props:{id:q},children:[{type:b,tag:f,props:{href:"#%E5%B0%8F%E6%B8%AC%E8%A9%A6",ariaHidden:j,tabIndex:k},children:[{type:b,tag:g,props:{className:[l,m]},children:[]}]},{type:a,value:q}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"使用 serialize() 序列化作測試函數，分別用 FPM 和 Swoole 各做一百萬和五百萬次的測試，如下圖所示，Request 也分別用 1 和 3 來測試執行的時間："}]},{type:a,value:c},{type:b,tag:"markdown-img",props:{src:"articles\u002Fphp-laravel-swoole-first-experience-1.png"},children:[{type:a,value:c}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"看到沒有! 由上圖資訊完全可以看出差異，不管是在 Request 數為 1 或 3 時，表現都比 FPM 速度來的優異，快了好幾倍! 可見 Swoole 的速度真的不是浪得虛名。這邊測試的環境皆為 1 CPU，兩者的 work_processes 皆為 1。"}]},{type:a,value:c},{type:b,tag:i,props:{id:r},children:[{type:b,tag:f,props:{href:"#%E7%B5%90%E8%AA%9E",ariaHidden:j,tabIndex:k},children:[{type:b,tag:g,props:{className:[l,m]},children:[]}]},{type:a,value:r}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"這次體驗 Swoole 的速度真的讓我大吃一驚，差點覺得是不是設定改錯了(笑)。雖然這次實驗 Swoole 是直接當它為 Http Server，不過它並不能完全取代 Nginx，畢竟 Swoole 能夠大大提升 PHP 的速度，但 Nginx 能夠更優異的處理靜態檔案等，兩者搭配起來才能各自發揮優勢，下次有空再找時間玩看看兩者搭配的效能如何好了XD"}]}]},dir:"\u002Fcoding",path:"\u002Fcoding\u002Fphp-laravel-swoole-first-experience",extension:".md"}}],fetch:{},mutations:[]}}("text","element","\n","code","p","a","span",2,"h2","true",-1,"icon","icon-link","環境","設定","執行","小測試","結語","li","div","nuxt-content-highlight","pre","line-numbers","2022-09-01T00:00:00.000Z","nofollow","noopener","noreferrer","_blank","token","swoole_http.php","language-text")));